<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.68">
<title data-react-helmet="true">Control Plane | Jason&#x27;s Kubernetes Notes</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" name="docusaurus_language" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Control Plane | Jason&#x27;s Kubernetes Notes"><meta data-react-helmet="true" name="description" content="The thing that is making all of this work is the control plane,"><meta data-react-helmet="true" property="og:description" content="The thing that is making all of this work is the control plane,"><meta data-react-helmet="true" property="og:url" content="https://jasonk.github.io/k8s-notes/concepts/control-plane"><link data-react-helmet="true" rel="shortcut icon" href="/k8s-notes/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://jasonk.github.io/k8s-notes/concepts/control-plane"><link rel="stylesheet" href="/k8s-notes/styles.e8739408.css">
<link rel="preload" href="/k8s-notes/styles.485f0e4b.js" as="script">
<link rel="preload" href="/k8s-notes/runtime~main.510bb9a0.js" as="script">
<link rel="preload" href="/k8s-notes/main.26d602f5.js" as="script">
<link rel="preload" href="/k8s-notes/1.158ac37d.js" as="script">
<link rel="preload" href="/k8s-notes/39.11ccaf8f.js" as="script">
<link rel="preload" href="/k8s-notes/935f2afb.2ae4a196.js" as="script">
<link rel="preload" href="/k8s-notes/38.2b191c7a.js" as="script">
<link rel="preload" href="/k8s-notes/0bbaed50.5be6739d.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav aria-label="Skip navigation links"><button type="button" tabindex="0" class="skipToContent_2AhQ">Skip to main content</button></nav><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><a class="navbar__brand" href="/k8s-notes/"><strong class="navbar__title">Jason&#x27;s Kubernetes Notes</strong></a></div><div class="navbar__items navbar__items--right"><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2aTZ"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_BsTx">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_BsTx">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/k8s-notes/"><strong class="navbar__title">Jason&#x27;s Kubernetes Notes</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_2gpo"><div class="docSidebarContainer_3_JD" role="complementary"><div class="sidebar_2urC"><div class="menu menu--responsive thin-scrollbar menu_5FrY"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_Dm3K" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">About</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/k8s-notes/">Welcome</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/k8s-notes/about/links">Helpful Kubernetes Links</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Setup</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/k8s-notes/setup/getting-started">Getting Started</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/k8s-notes/setup/control-node">Control Node</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/k8s-notes/setup/worker-nodes">Adding Worker Nodes</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/k8s-notes/setup/user-config">User Configuration</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/k8s-notes/setup/dashboard">Dashboard</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/k8s-notes/setup/helm">Helm</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/k8s-notes/setup/operators-and-openebs">Operators and OpenEBS</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/k8s-notes/setup/jsonnet-and-prometheus">Jsonnet and Prometheus</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/k8s-notes/setup/metallb">MetalLB</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/k8s-notes/setup/nginx-ingress">Nginx Ingress</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/k8s-notes/setup/exploring-pods">Exploring Pods</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Concepts</a><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/k8s-notes/concepts/control-plane">Control Plane</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/k8s-notes/concepts/operators">Operators</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/k8s-notes/concepts/tainting">Taints and Tolerations</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Applications</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/k8s-notes/apps/argocd">ArgoCD</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/k8s-notes/apps/cert-manager">cert-manager</a></li></ul></li></ul></div></div></div><main class="docMainContainer_3EyW"><div class="container padding-vert--lg docItemWrapper_39qw"><div class="row"><div class="col docItemCol_2ASc"><div class="docItemContainer_3QWW"><article><header><h1 class="docTitle_1Lrw">Control Plane</h1></header><div class="markdown"><p>The thing that is making all of this work is the <code>control plane</code>,
which manages how workloads are executed, monitored, and maintained in
the cluster.</p><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="machine-classes"></a>Machine Classes<a aria-hidden="true" class="hash-link" href="#machine-classes" title="Direct link to heading">#</a></h1><p>In any cluster there are two classes of machines:</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="master-node"></a>Master Node<a aria-hidden="true" class="hash-link" href="#master-node" title="Direct link to heading">#</a></h2><p>The <code>master node</code> contains most of the components which make up the
control plane.  In a moderately sized cluster it&#x27;s not uncommon to
have a single master node, though you can have multiple masters for
high availability.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="worker-node"></a>Worker Node<a aria-hidden="true" class="hash-link" href="#worker-node" title="Direct link to heading">#</a></h2><p>A <code>worker node</code> is a machine that is actually doing the work of
running application workloads.  You might have different machine types
tailored to different types of workloads in a cluster.  For example,
you may have some nodes with heavy-duty GPUs and some that are
CPU-optimized.</p><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="control-plane-components"></a>Control Plane Components<a aria-hidden="true" class="hash-link" href="#control-plane-components" title="Direct link to heading">#</a></h1><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="api-server"></a>API server<a aria-hidden="true" class="hash-link" href="#api-server" title="Direct link to heading">#</a></h2><p>When you communicate with the cluster, you do it through the <code>API
server</code>.  The API server validates requests to update objects and acts
as the unified interface for queries about the cluster&#x27;s current
state.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="etcd"></a>etcd<a aria-hidden="true" class="hash-link" href="#etcd" title="Direct link to heading">#</a></h2><p>The state of the cluster is stored in etcd.  This is the only stateful
component of the control plane.  It stores information about the
cluster configuration, object specifications, object statuses, cluster
nodes, and the assignments of objects to nodes.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="scheduler"></a>scheduler<a aria-hidden="true" class="hash-link" href="#scheduler" title="Direct link to heading">#</a></h2><p>The scheduler is in charge of deciding what whould run where.  The
scheduler will ask the API server which objects haven&#x27;t been assigned
to a node, and then it will use the configuration of those objects and
the state of the cluster to determine which nodes to run them on.  It
then communicates this back to the API server to be recorded in etcd.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="controller-manager"></a>controller-manager<a aria-hidden="true" class="hash-link" href="#controller-manager" title="Direct link to heading">#</a></h2><p>At a high level the controller-manager is repsonsible for managing the
state of the cluster.  It manages a collection of controllers, which
are each responsible for monitoring a specific resource type.  These
controllers monitor the state of those components and validate that
the current state conforms to the desired state that is stored in
etcd.  The controllers are reponsible for making sure the pods stay
healthy.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="kubelet"></a>kubelet<a aria-hidden="true" class="hash-link" href="#kubelet" title="Direct link to heading">#</a></h2><p>The <code>kubelet</code> is is a small piece of the control plane that runs on
each worker node.  It is responsible for informing the API server
about the existing of the node, and it&#x27;s available resources so that
the scheduler can assign pods to it.  When pods are scheduled the API
server will inform the kubelet, which will then start up the pods.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="kube-proxy"></a>kube-proxy<a aria-hidden="true" class="hash-link" href="#kube-proxy" title="Direct link to heading">#</a></h2><p>The <code>kube-proxy</code> also runs on each worker node.  It is responsible for
all of the networking related concerns, like how to forward traffic to
the appropriate pod.</p><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="control-plane-architecture"></a>Control Plane Architecture<a aria-hidden="true" class="hash-link" href="#control-plane-architecture" title="Direct link to heading">#</a></h1><p>The whole system is architected to ensure that component failures have
minimal impact.  For example, even if the master node goes down, none
of the running applications would be immediately affected, losing the
control plane just prevents you from making any further changes to the
cluster until a new master node is brought online.  If any worker node
fails, the control plane will ensure that all of the pods it was
running are started up somewhere else.</p></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/jasonk/k8s-notes/edit/master/docs/concepts/control-plane.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 40 40" style="margin-right:0.3em;vertical-align:sub"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/k8s-notes/setup/exploring-pods"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Exploring Pods</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/k8s-notes/concepts/operators"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Operators Â»</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_3SO_ thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#master-node" class="table-of-contents__link">Master Node</a></li><li><a href="#worker-node" class="table-of-contents__link">Worker Node</a></li><li><a href="#api-server" class="table-of-contents__link">API server</a></li><li><a href="#etcd" class="table-of-contents__link">etcd</a></li><li><a href="#scheduler" class="table-of-contents__link">scheduler</a></li><li><a href="#controller-manager" class="table-of-contents__link">controller-manager</a></li><li><a href="#kubelet" class="table-of-contents__link">kubelet</a></li><li><a href="#kube-proxy" class="table-of-contents__link">kube-proxy</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="text--center"><div>Copyright Â© 2020 Jason Kohles</div></div></div></footer></div>
<script src="/k8s-notes/styles.485f0e4b.js"></script>
<script src="/k8s-notes/runtime~main.510bb9a0.js"></script>
<script src="/k8s-notes/main.26d602f5.js"></script>
<script src="/k8s-notes/1.158ac37d.js"></script>
<script src="/k8s-notes/39.11ccaf8f.js"></script>
<script src="/k8s-notes/935f2afb.2ae4a196.js"></script>
<script src="/k8s-notes/38.2b191c7a.js"></script>
<script src="/k8s-notes/0bbaed50.5be6739d.js"></script>
</body>
</html>