<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.68">
<title data-react-helmet="true">cert-manager | Jason&#x27;s Kubernetes Notes</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" name="docusaurus_language" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="cert-manager | Jason&#x27;s Kubernetes Notes"><meta data-react-helmet="true" name="description" content="cert-manager is a native Kubernetes certificate management"><meta data-react-helmet="true" property="og:description" content="cert-manager is a native Kubernetes certificate management"><meta data-react-helmet="true" property="og:url" content="https://jasonkohles.com/k8s-notes/apps/cert-manager"><link data-react-helmet="true" rel="shortcut icon" href="/k8s-notes/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://jasonkohles.com/k8s-notes/apps/cert-manager"><link rel="stylesheet" href="/k8s-notes/styles.e8739408.css">
<link rel="preload" href="/k8s-notes/styles.69075ca6.js" as="script">
<link rel="preload" href="/k8s-notes/runtime~main.a4215b58.js" as="script">
<link rel="preload" href="/k8s-notes/main.3878add6.js" as="script">
<link rel="preload" href="/k8s-notes/1.d74cfc91.js" as="script">
<link rel="preload" href="/k8s-notes/25.575fc837.js" as="script">
<link rel="preload" href="/k8s-notes/935f2afb.93050429.js" as="script">
<link rel="preload" href="/k8s-notes/24.e6edf205.js" as="script">
<link rel="preload" href="/k8s-notes/b7a2c112.f0117e55.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav aria-label="Skip navigation links"><button type="button" tabindex="0" class="skipToContent_2AhQ">Skip to main content</button></nav><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/k8s-notes/"><strong class="navbar__title">Jason&#x27;s Kubernetes Notes</strong></a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/jasonk/k8s-notes" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2aTZ"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_BsTx">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_BsTx">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/k8s-notes/"><strong class="navbar__title">Jason&#x27;s Kubernetes Notes</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a href="https://github.com/jasonk/k8s-notes" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_2gpo"><div class="docSidebarContainer_3_JD" role="complementary"><div class="sidebar_2urC"><div class="menu menu--responsive thin-scrollbar menu_5FrY"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_Dm3K" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">About</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/k8s-notes/">Welcome</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/k8s-notes/about/links">Helpful Kubernetes Links</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Setup</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/k8s-notes/setup/getting-started">Getting Started</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/k8s-notes/setup/control-node">Control Node</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/k8s-notes/setup/worker-nodes">Adding Worker Nodes</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/k8s-notes/setup/user-config">User Configuration</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/k8s-notes/setup/dashboard">Dashboard</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/k8s-notes/setup/helm">Helm</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/k8s-notes/setup/operators-and-openebs">Operators and OpenEBS</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/k8s-notes/setup/jsonnet-and-prometheus">Jsonnet and Prometheus</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/k8s-notes/setup/metallb">MetalLB</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/k8s-notes/setup/nginx-ingress">Nginx Ingress</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/k8s-notes/setup/exploring-pods">Exploring Pods</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Concepts</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/k8s-notes/concepts/control-plane">Control Plane</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/k8s-notes/concepts/operators">Operators</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/k8s-notes/concepts/tainting">Taints and Tolerations</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Applications</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/k8s-notes/apps/argocd">ArgoCD</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/k8s-notes/apps/cert-manager">cert-manager</a></li></ul></li></ul></div></div></div><main class="docMainContainer_3EyW"><div class="container padding-vert--lg docItemWrapper_39qw"><div class="row"><div class="col docItemCol_2ASc"><div class="docItemContainer_3QWW"><article><header><h1 class="docTitle_1Lrw">cert-manager</h1></header><div class="markdown"><blockquote><p>cert-manager is a native Kubernetes certificate management
controller. It can help with issuing certificates from a variety of
sources, such as Letâ€™s Encrypt, HashiCorp Vault, Venafi, a simple
signing key pair, or self signed.</p><p>It will ensure certificates are valid and up to date, and attempt to
renew certificates at a configured time before expiry.</p></blockquote><p>Home Page: <a href="https://cert-manager.io/docs/" target="_blank" rel="noopener noreferrer">https://cert-manager.io/docs/</a></p><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="cluster-installation"></a>Cluster Installation<a aria-hidden="true" class="hash-link" href="#cluster-installation" title="Direct link to heading">#</a></h1><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><div tabindex="0" class="prism-code language-sh codeBlock_3iAC thin-scrollbar"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl apply -f https://github.com/jetstack/cert-manager/releases/download/v1.0.4/cert-manager.yaml</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button></div></div><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="testing-the-install"></a>Testing the install<a aria-hidden="true" class="hash-link" href="#testing-the-install" title="Direct link to heading">#</a></h1><p>Create a test issuer to issue a self-signed certificate:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><div tabindex="0" class="prism-code language-sh codeBlock_3iAC thin-scrollbar"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">cat &lt;&lt;EOF &gt; test-resources.yaml</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">apiVersion: v1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">kind: Namespace</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">metadata:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  name: cert-manager-test</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">---</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">apiVersion: cert-manager.io/v1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">kind: Issuer</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">metadata:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  name: test-selfsigned</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  namespace: cert-manager-test</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">spec:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  selfSigned: {}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">---</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">apiVersion: cert-manager.io/v1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">kind: Certificate</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">metadata:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  name: selfsigned-cert</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  namespace: cert-manager-test</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">spec:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  dnsNames:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    - example.com</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  secretName: selfsigned-cert-tls</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  issuerRef:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    name: test-selfsigned</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">EOF</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button></div></div><p>Then apply that configuration.  If you get an error about &quot;failed
calling webhook&quot; then the cert-manager is probably still coming up,
wait a minute or two and try again.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><div tabindex="0" class="prism-code language-sh codeBlock_3iAC thin-scrollbar"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl apply -f test-resources.yaml</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button></div></div><p>Check that it was successfully issued (you may need to wait a few
seconds for it to finish).</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><div tabindex="0" class="prism-code language-sh codeBlock_3iAC thin-scrollbar"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl describe certificate -n cert-manager-test</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button></div></div><p>Clean up:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><div tabindex="0" class="prism-code language-sh codeBlock_3iAC thin-scrollbar"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl delete -f test-resources.yaml</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button></div></div><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="workstation-installation"></a>Workstation Installation<a aria-hidden="true" class="hash-link" href="#workstation-installation" title="Direct link to heading">#</a></h1><p>There is a <code>cert-manager</code> plugin for <code>kubectl</code> that can help make some
of the more common actions easier.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><div tabindex="0" class="prism-code language-sh codeBlock_3iAC thin-scrollbar"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">curl -Lo kubectl-cert-manager.tar.gz https://github.com/jetstack/cert-manager/releases/download/v1.0.4/kubectl-cert_manager-linux-amd64.tar.gz</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">tar xzf kubectl-cert-manager.tar.gz</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">sudo mv kubectl-cert_manager /usr/local/bin</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button></div></div><p>To see how to use it visit
<a href="https://cert-manager.io/docs/usage/kubectl-plugin/" target="_blank" rel="noopener noreferrer">https://cert-manager.io/docs/usage/kubectl-plugin/</a></p><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="configuration"></a>Configuration<a aria-hidden="true" class="hash-link" href="#configuration" title="Direct link to heading">#</a></h1><p>To actually issue certificates you need to configure an issuer.</p><ul><li><a href="https://cert-manager.io/docs/configuration/selfsigned/" target="_blank" rel="noopener noreferrer">SelfSigned</a></li></ul><p>The SelfSigned issuer is the simplest to setup, but it also means that
clients have no way to trust the issued certificates.  You might want
to use this one for testing, but otherwise it&#x27;s only really useful for
the bootstrapping phase of some other PKI setup.</p><ul><li><a href="https://cert-manager.io/docs/configuration/ca/" target="_blank" rel="noopener noreferrer">CA</a></li></ul><p>The CA issuer creates a Certificate Authority in the cluster, with
a private key stored as a Kubernetes Secret that can then be used to
sign other certificates.  This is one step above the SelfSigned
issuer, as you still have to add the CA certificate to your browser or
client applications so they know to trust the issued certificates, but
once they are configured any certificates issued by this issuer will
be trusted.</p><ul><li><a href="https://cert-manager.io/docs/configuration/acme/" target="_blank" rel="noopener noreferrer">ACME</a></li></ul><p>The ACME issuer requests certificates using the ACME protocol.  The
most popular of these is <a href="https://letsencrypt.org/" target="_blank" rel="noopener noreferrer">Let&#x27;s Encrypt</a>,
which provides free certificates signed by a globally trusted
certificate authority.</p><p>Other issuer types can be found at <a href="https://cert-manager.io/docs/configuration/" target="_blank" rel="noopener noreferrer">https://cert-manager.io/docs/configuration/</a></p><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="next-steps"></a>Next Steps<a aria-hidden="true" class="hash-link" href="#next-steps" title="Direct link to heading">#</a></h1><p><a href="https://docs.cert-manager.io/en/latest/tutorials/acme/http-validation.html" target="_blank" rel="noopener noreferrer">https://docs.cert-manager.io/en/latest/tutorials/acme/http-validation.html</a></p><ul><li><a href="https://cert-manager.io/docs/faq/" target="_blank" rel="noopener noreferrer">FAQ</a></li></ul></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/jasonk/k8s-notes/edit/main/docs/apps/cert-manager.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 40 40" style="margin-right:0.3em;vertical-align:sub"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/k8s-notes/apps/argocd"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« ArgoCD</div></a></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_3SO_ thin-scrollbar"></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="text--center"><div>Copyright Â© 2020 Jason Kohles</div></div></div></footer></div>
<script src="/k8s-notes/styles.69075ca6.js"></script>
<script src="/k8s-notes/runtime~main.a4215b58.js"></script>
<script src="/k8s-notes/main.3878add6.js"></script>
<script src="/k8s-notes/1.d74cfc91.js"></script>
<script src="/k8s-notes/25.575fc837.js"></script>
<script src="/k8s-notes/935f2afb.93050429.js"></script>
<script src="/k8s-notes/24.e6edf205.js"></script>
<script src="/k8s-notes/b7a2c112.f0117e55.js"></script>
</body>
</html>